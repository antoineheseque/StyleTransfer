<!-- import librairies -->
<mvc:View controllerName="Quickstart.controller.App" displayBlock="true"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:tnt="sap.tnt"
	xmlns:u="sap.ui.unified"
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core">

<!-- page -->
	<App id="app">
		<pages>
			<Page id="page" showHeader="true" title="Style Transfer Project" floatingFooter="true"
				class="sapUiResponsivePadding--header sapUiResponsivePadding--content sapUiResponsivePadding--footer sapUiResponsivePadding--floatingFooter body header">

				<!-- reset button -->
				<Button class="sapUiTinyMarginBegin sapUiTinyMarginTop reset" text="Reset" icon="sap-icon://reset" press="onReset"/>

				<!-- input img box -->
				<VBox id="choices" alignItems="Center" >

					<!-- title -->
					<OverflowToolbar>
						<Title class="sapUiLargeMarginTopBottom" level="H5" text="Choose an image!" />
					</OverflowToolbar>

					<HBox id="inputBtnChoice" class="sapUiSmallMarginTop sapUiTinyMarginBeginEnd">
						<Button class="sapUiLargeMarginEnd sapUiLargeMarginTop inputBtn" icon="sap-icon://insurance-house" text="Local" press="onInputLocal"/>
						<Button class="inputBtn apUiLargeMarginBegin sapUiLargeMarginTop" icon="sap-icon://chain-link" text="URL" press="onInputURL"/>
					</HBox>

					<!-- input local img box -->
					<u:FileUploader
						class="sapUiSmallMarginTop"
						visible="false"
						id="fileUploader"
						name="myFileUpload"
						tooltip="Upload your file to the local server"
						uploadComplete="handleUploadComplete"
						change="handleValueChange"
						typeMissmatch="handleTypeMissmatch"
						fileType="png,jpg,jpeg"
						placeholder="Choose a local image"/>

					<!-- input url field box -->
					<HBox visible="false" id="inputImgBox" class="sapUiTinyMarginBeginEnd">
						<Input
							id="inputUrl"
							type="Url"
							placeholder="Enter image URL"
							class="sapUiSmallMarginTop" />

						<!-- validate input img url button -->
						<Button class="validate sapUiTinyMarginBegin sapUiSmallMarginTop" icon="sap-icon://accept" press="onChooseImg"/>
					</HBox>
					<Text id='formatInfo' visible='false' class="infoText sapUiSmallMarginTop" text="Link extention must be .png, .jpeg or .jpg" />

					<!-- display input img container -->
					<GenericTile id='imgTile'
						visible = 'false'
						class="sapUiTinyMarginBeginEnd sapUiTinyMarginTop sapUiSmallMarginBottom"
						backgroundImage=""
						frameType="OneByOne">
					</GenericTile>

					<!-- title -->
					<OverflowToolbar>
						<Title id='stylesTitle' visible='false' class="sapUiSmallMarginTopBottom" level="H5" text="Choose your style!" />
					</OverflowToolbar>

					<!-- styles available container -->
					<VBox class="sapUiTinyMarginBeginEnd">

						<ScrollContainer id="scrollContainer" horizontal="true" vertical="true">

								<FlexBox id="artworks" items="{/}" alignItems="Center" justifyContent="Center" width="80rem">
									<items>
										<GenericTile
											ariaLabel='{link}'
											imageDescription='{title} by {artist}'
											visible='{visible}'
											class="sapUiTinyMarginBegin sapUiTinyMarginTop"
											backgroundImage="resources/imgmodels/{id}.{format}"
											frameType="Auto"
											press="onSelectArtist">
										</GenericTile>
									</items>
								</FlexBox>
						</ScrollContainer>			
					</VBox>

					<!-- style img selected by user container -->
					<GenericTile id='styleChoosen'
									imageDescription=''
									ariaLabel=''
									visible='false'
									class="sapUiTinyMarginBeginEnd sapUiTinyMarginTop"
									backgroundImage=""
									frameType="OneByOne"
									press="onChangeArtist">
					</GenericTile>

					<!-- artwork name for style choosen -->
					<Label class="sapUiSmallMarginTop" visible="false" id="artistChoosen" text=""/>

					<!-- start process button -->
					<Button class="sapUiMediumMarginTop sapUiLargeMarginBottom" id="run" visible="false" text="Go" press="onProcess"/>
				</VBox>

				<!-- ouput img container -->
				<VBox id="after" visible="false" class="sapUiLargeMarginTopBottom" alignItems="Center" >
					<Image id="processedImg" src="" width="100%" height="100%" />

					<!-- download output img button -->
					<Button class="sapUiTinyMarginBegin sapUiTinyMarginBegin sapUiTinyMarginTop download" text="Download" icon="sap-icon://download" press="onDownload"/>
				</VBox>

				<!-- busy box visible while loading -->
				<VBox id='busybox' visible="false" alignItems="Center" class="sapUiLargeMarginTop" >
					<OverflowToolbar>
						<Title class="sapUiLargeMarginTopBottom" level="H5" text="Loading ..." />
					</OverflowToolbar>

					<!-- animated icon -->
					<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin: auto; background: rgba(255, 255, 255, 0); display: block;" width="240px" height="240px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
						<path fill="none" stroke="#FCA311" stroke-width="8" stroke-dasharray="128.29446411132812 128.29446411132812" d="M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z" stroke-linecap="round" style="transform:scale(0.8);transform-origin:50px 50px">
							<animate attributeName="stroke-dashoffset" repeatCount="indefinite" dur="1.3333333333333333s" keyTimes="0;1" values="0;256.58892822265625"></animate>
						</path>
					</svg>
				</VBox> 
				
				<!-- footer bar -->
				<footer>
					<OverflowToolbar>
						<ToolbarSpacer/>
							<Label class="footerText" text="By Antoine Hésèque, Jean-Charles Coudon, Alexis Soltysiak and Imane Choukhi" />
						<ToolbarSpacer/>
					</OverflowToolbar>
				</footer>		
			</Page>
		</pages>
	</App>

</mvc:View>
